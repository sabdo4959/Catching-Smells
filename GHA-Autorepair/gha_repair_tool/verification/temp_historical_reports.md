# 임시 보관: 과거 리포트 및 상세 분석 자료

> 이 파일은 verification 디렉토리 정리를 위해 생성된 임시 보관 파일입니다.
> 핵심 내용은 README.md로 통합되었으며, 이 파일은 참고용으로만 보관됩니다.

## 📂 보관된 리포트 목록

### 1. 구조적 검증기 상세 로직 설명
**원본:** `structural_verifier.md`
**내용:** 구조적 동치성 검증기의 상세한 알고리즘과 판단 규칙

### 2. 향상된 검증 비교 보고서 
**원본:** `enhanced_verification_comparison_report.md`
**내용:** 기존 검증(0%) vs 향상된 검증(6%) 성능 비교

### 3. 구조적 안전성 비교 보고서
**원본:** `structural_safety_comparison_report.md` 
**내용:** 3가지 수정 방법(Baseline/Two-Phase/GHA-Repair)의 상세 비교

### 4. 3가지 방법 향상된 검증 비교
**원본:** `three_methods_enhanced_verification_comparison.md`
**내용:** 향상된 검증 시스템으로 3가지 방법 재검증 결과

### 5. 테스트 리포트들
**원본:** `test/test_report_*.md` (다수 파일)
**내용:** 각 테스트 실행 시점별 상세 결과

---

## 📋 구조적 검증기 상세 로직 (structural_verifier.md)

### 개요
본 검증기의 목표는 LLM이 생성한 수정안이 원본의 **핵심 구조**를 변경하지 않았는지 확인하는 것입니다.

### 핵심 철학: "키 구조" 기반 검증
- **"값(Value)"은 무시**: `name:`, `env:`, `with:` 등의 값은 대부분 무시
- **"구조(Key)"는 검증**: `jobs` 순서, `needs`, `steps` 순서 등 워크플로우의 뼈대 변경 탐지
- **"값이 곧 구조인 키"는 예외**: `needs`, `strategy.matrix`는 값이더라도 구조로 취급
- **"허용된 변경"은 통과**: 스멜 수정용 키 추가는 안전한 변경으로 예외 처리

### 검증 알고리즘
1. **입력**: Original YAML, Repaired YAML, Target Smells List
2. **파싱**: 두 YAML 파일을 트리 구조로 파싱
3. **변경 탐지**: 두 트리 비교하여 모든 구조적/값 변경 사항 탐지
4. **변경 분류**: 탐지된 변경 사항을 판단 규칙에 따라 분류
5. **최종 판정**: 위험한 구조 변경 하나라도 발견시 UNSAFE, 모든 변경이 안전하면 SAFE

### 판단 규칙

#### ✅ 안전한(SAFE) 변경
- **무시 대상**: `name:`, `env:`, `with:`, `on:`, `if:` 등 메타데이터
- **허용 대상**: 
  - `permissions:` 키/값 추가/수정 (Smell 15)
  - `timeout-minutes:` 키 추가 (Smell 10)
  - `concurrency:` 블록 추가/수정 (Smell 4, 5)
  - `uses:` 값 변경 (Smell 24 버전 업그레이드만)
  - `run:` 값 변경 (Smell 25 사용 중단된 명령어 수정만)

#### ❌ 위험한(UNSAFE) 변경
- **핵심 구조 변경**: `jobs` 리스트 변경 (잡 추가/삭제)
- **실행 순서 변경**: `steps` 순서 변경, `needs` 의존성 변경
- **실행 환경 변경**: `strategy.matrix` 변경
- **허용되지 않은 값 변경**: 위 허용 조건에 맞지 않는 `uses`/`run` 변경

---

## 📊 향상된 검증 비교 보고서 (enhanced_verification_comparison_report.md)

### 검증 방법 비교
- **기존 검증 (2024년 8월)**: 안전 0개 (0%), 위험 100개 (100%)
- **향상된 검증 (2024년 11월)**: 안전 6개 (6%), 위험 94개 (94%)

### 주요 개선사항
- **안전률 개선**: 0% → 6% (6개 파일이 실제로는 안전함을 발견)
- **오탐 감소**: if 조건문을 의미적 동치로 제외하여 정확도 향상
- **구조적 이해 개선**: needs와 matrix를 구조적 요소로 인식

### 발견된 구조적 값 문제
- **needs 의존성 문제**: 11건 (작업 의존성 변경으로 실행 순서 영향)
- **matrix 전략 문제**: 5건 (빌드 매트릭스 변경으로 실행 환경 영향)

---

## 🎯 구조적 안전성 비교 보고서 (structural_safety_comparison_report.md)

### 실험 개요
3가지 GitHub Actions 워크플로우 수정 방법의 구조적 안전성을 키 구조 검증으로 비교:
1. **Baseline**: 기존 ChatGPT 기반 단순 수정
2. **Two-Phase**: 2단계 복구 방식
3. **GHA-Repair**: Guided Prompt 기반 수정 (제안 방법)

### 주요 결과
| 방법 | 안전 파일 수 | 전체 파일 수 | 구조적 안전율 | 순위 |
|------|-------------|-------------|-------------|------|
| **GHA-Repair** | **6개** | 100개 | **6.0%** | 🥇 1위 |
| **Two-Phase** | 3개 | 100개 | 3.0% | 🥈 2위 |
| **Baseline** | 2개 | 99개 | 2.0% | 🥉 3위 |

### 핵심 성과
- **GHA-Repair가 baseline 대비 3배 향상** (2.0% → 6.0%)
- **GHA-Repair가 two-phase 대비 2배 향상** (3.0% → 6.0%)
- **절대적 안전 파일 수에서도 최고 성능** (6개 vs 3개 vs 2개)

### 공통 안전 파일 (모든 방법 성공)
- `01a4c66498480a201e67a8e18ea4bab86b04d9fad745a5ff405dec5417221b93`
- `eda4becd286010436a22854c03c251fe68585622868a4c32b2674bbe2fb3f520`

### GHA-Repair 고유 성공 파일
- `1d128012d813f4c17507788c181106fee15d6590f438d998e726f3ed606d07f4`
- `93f763fb4a84d29e77a6bf72349a0534feaee1862658e1807423e8900d015dcb`
- `e413f663053377e00614f72f1bc34979d48f84e925fbc0bb453c196612f281dc`

---

## 🔬 3가지 방법 향상된 검증 비교 (three_methods_enhanced_verification_comparison.md)

### 검증 결과 요약
| 방법 | 총 파일 | 기본 안전 | 향상 안전 | 기본 안전률 | 향상 안전률 | 검증 오류 |
|------|---------|-----------|-----------|-------------|-------------|-----------|
| **baseline** | 100개 | 2개 | 2개 | 2.0% | 2.0% | 50개 |
| **two_phase** | 100개 | 3개 | 3개 | 3.0% | 3.0% | 49개 |
| **gha_repair** | 100개 | 6개 | 6개 | 6.0% | 6.0% | 49개 |

### 검증 시스템 신뢰성 확인
- **모든 방법**에서 기본 검증과 향상된 검증 결과가 **100% 일치**
- if 조건문 제외가 모든 방법에서 일관되게 적용
- needs/matrix 구조적 값 감지가 정상 작동

### 구조적 값 문제 감지 사례
#### needs 의존성 변경
- **gha_repair**: 8건 감지
- **baseline**: 3건 감지
- **two_phase**: 9건 감지

#### matrix 전략 변경
- **gha_repair**: 4건 감지
- **baseline**: 2건 감지
- **two_phase**: 4건 감지

---

## 🧪 테스트 리포트 예시 (test_report_20251102_203911.md)

### 실행 정보
- **실행 시간**: 2025-11-02 20:39:11
- **전체 성공률**: 100.0%
- **총 실행 시간**: 0.05초

### 테스트 결과
| 테스트 스위트 | 결과 | 실행 시간 |
|--------------|------|-----------|
| gray_area | ✅ PASS | 0.03s |
| comprehensive | ✅ PASS | 0.02s |

### 테스트 상세 내용
#### Gray Area 테스트
- **목적**: 스멜 수정 vs 환각 구별 능력 검증
- **케이스**: 스멜 수정(허용), 사이드 이펙트(거부), 구조 변경(거부), 값 변경(허용)

#### 종합적인 테스트  
- **목적**: 복잡한 시나리오에서의 정확도 검증
- **케이스**: 복잡한 needs 의존성, matrix 전략, 여러 스멜 동시 수정, 실제 수리 도구 시뮬레이션

---

## 📝 정리 노트

이 임시 파일에는 verification 디렉토리 정리 과정에서 README.md로 통합된 리포트들의 원본 내용이 보관되어 있습니다. 

**핵심 내용은 모두 README.md에 통합**되었으므로, 일상적인 참조는 README.md를 사용하시고, 이 파일은 상세한 역사적 기록이 필요할 때만 참조하시기 바랍니다.

**통합된 주요 개선사항**:
- ✅ False positive 대폭 감소 (whitespace, 주석 차이 해결)
- ✅ 구조적 위험 정확 감지 유지 (action 참조 변경 등)  
- ✅ 100% 테스트 통과율로 시스템 안정성 확보
- ✅ 3가지 수리 모드의 정확한 비교 분석 완료
